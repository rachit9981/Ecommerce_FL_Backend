<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #4361ee;
        --secondary-color: #3f37c9;
        --accent-color: #4895ef;
        --success-color: #4cc9f0;
        --text-primary: #333333;
        --text-secondary: #555555;
        --text-light: #777777;
        --bg-light: #f8f9fa;
        --bg-white: #ffffff;
        --border-color: #e9ecef;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: "Inter", sans-serif;
        margin: 0;
        padding: 20px;
        background-color: var(--bg-light);
        color: var(--text-primary);
        line-height: 1.6;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background-color: var(--bg-white);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid var(--border-color);
        padding-bottom: 30px;
        margin-bottom: 30px;
      }

      .header img {
        max-width: 180px;
        max-height: 80px;
        object-fit: contain;
      }

      .header h1 {
        font-size: 2.2em;
        font-weight: 700;
        color: var(--primary-color);
        margin: 0;
        letter-spacing: -0.5px;
      }

      .invoice-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 30px;
        margin-bottom: 40px;
      }

      .company-details,
      .invoice-details {
        margin-bottom: 20px;
      }

      .company-details h3,
      .invoice-details h3 {
        font-size: 1.1em;
        font-weight: 600;
        margin-bottom: 10px;
        color: var(--secondary-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .company-details p,
      .invoice-details p {
        margin: 5px 0;
        font-size: 0.95em;
        color: var(--text-secondary);
      }

      .company-details strong,
      .invoice-details strong {
        font-weight: 600;
        color: var(--text-primary);
      }

      .items-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-bottom: 40px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.03);
      }

      .items-table th,
      .items-table td {
        padding: 15px;
        text-align: left;
        font-size: 0.95em;
        border-bottom: 1px solid var(--border-color);
      }

      .items-table th {
        background-color: var(--primary-color);
        font-weight: 600;
        color: white;
        letter-spacing: 0.5px;
      }

      .items-table tr:last-child td {
        border-bottom: none;
      }

      .items-table tr:nth-child(even) {
        background-color: rgba(67, 97, 238, 0.03);
      }

      .items-table tr:hover {
        background-color: rgba(67, 97, 238, 0.05);
      }

      .totals {
        background-color: var(--bg-light);
        padding: 20px;
        border-radius: 8px;
        text-align: right;
        margin-bottom: 40px;
      }

      .totals p {
        margin: 10px 0;
        font-size: 1em;
        display: flex;
        justify-content: space-between;
      }

      .totals .total-row {
        font-weight: 700;
        font-size: 1.2em;
        color: var(--primary-color);
        margin-top: 15px;
        padding-top: 15px;
        border-top: 2px solid var(--border-color);
      }

      .footer {
        text-align: center;
        font-size: 0.9em;
        color: var(--text-light);
        border-top: 1px solid var(--border-color);
        padding-top: 30px;
        margin-top: 30px;
      }

      .thank-you {
        text-align: center;
        background-color: rgba(76, 201, 240, 0.1);
        color: var(--secondary-color);
        padding: 15px;
        border-radius: 8px;
        font-weight: 500;
        font-size: 1.2em;
        margin: 30px 0;
      }

      .badge {
        display: inline-block;
        padding: 6px 12px;
        background-color: var(--accent-color);
        color: white;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 600;
        margin-bottom: 20px;
      }

      @media print {
        body {
          padding: 0;
          background-color: var(--bg-white);
        }

        .container {
          max-width: 100%;
          padding: 20px;
          box-shadow: none;
          border-radius: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <img src="{{ logo_url }}" alt="Anand Mobiles Logo" />
        <h1>INVOICE</h1>
      </div>

      <div class="badge">PAID</div>

      <div class="invoice-grid">
        <div class="company-details">
          <h3>From</h3>
          <p><strong>Anand Mobiles</strong></p>
          <p>123 Tech Street, Gadget City</p>
          <p>Email: support@anandmobiles.com</p>
          <p>Phone: (123) 456-7890</p>
        </div>

        <div class="invoice-details">
          <h3>Invoice Details</h3>
          <p><strong>Invoice Number:</strong> {{ invoice_id }}</p>
          <p><strong>Order ID:</strong> {{ order_id }}</p>
          <p><strong>Date:</strong> {{ date }}</p>
        </div>

        <div class="billing-details">
          <h3>Billed To</h3>
          <p><strong>{{ user_name }}</strong></p>
          <p>{{ user_email }}</p>
          {% if shipping_address %}
          <p>
            {{ shipping_address.street }}, {{ shipping_address.city }}, {{
            shipping_address.state }} - {{ shipping_address.zip_code }}
          </p>
          {% endif %}
        </div>

        <div class="payment-details">
          <h3>Payment Method</h3>
          <p><strong>Method:</strong> Online Payment</p>
          <p><strong>Status:</strong> Completed</p>
        </div>
      </div>

      <table class="items-table">
        <thead>
          <tr>
            <th>Item</th>
            <th>Brand</th>
            <th>Model</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Total Price</th>
          </tr>
        </thead>
        <tbody>
          {% for item in order_items %}
          <tr>
            <td>{{ item.name }}</td>
            <td>{{ item.brand }}</td>
            <td>{{ item.model }}</td>
            <td>{{ item.quantity }}</td>
            <td>₹{{ item.price_at_purchase|floatformat:2 }}</td>
            <td>₹{{ item.total_item_price|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <div class="totals">
        <p>
          <span>Subtotal:</span>
          <span>₹{{ subtotal|floatformat:2 }}</span>
        </p>
        <p>
          <span>Shipping:</span>
          <span>₹{{ shipping_cost|floatformat:2 }}</span>
        </p>
        <p>
          <span>Tax ({{ tax_rate_percentage }}%):</span>
          <span>₹{{ tax_amount|floatformat:2 }}</span>
        </p>
        <p class="total-row">
          <span>Total Amount:</span>
          <span>₹{{ total_amount|floatformat:2 }}</span>
        </p>
      </div>

      <div class="thank-you">Thank you for your purchase!</div>

      <div class="footer">
        <p>
          If you have any questions, please contact us at
          <strong>support@anandmobiles.com</strong>
        </p>
        <p>&copy; {{ current_year }} Anand Mobiles. All rights reserved.</p>
      </div>
    </div>
  </body>
</html>
